<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <title>Форма регистрации клиента</title>
</head>

<body>
    <h1>Регистрация клиента</h1>
    <form action="/submit" method="POST">
        <!-- <label for="telegram_id">Telegram ID:</label>
        <input type="text" id="telegram_id" name="telegram_id" required><br><br> -->

        <p id="tel">Ваш Telegram ID: </p>
        <p id="telegram_id"></p>

        <label for="full_name">Полное имя:</label>
        <input type="text" id="full_name" name="full_name" required><br><br>

        <label for="phone_number">Номер телефона:</label>
        <input type="tel" id="phone_number" name="phone_number" required><br><br>

        <label for="pet_name">Имя животного:</label>
        <input type="text" id="pet_name" name="pet_name" required><br><br>

        <label for="pet_breed">Порода животного (опционально):</label>
        <input type="text" id="pet_breed" name="pet_breed"><br><br>

        <label for="pet_age">Возраст животного (опционально):</label>
        <input type="number" id="pet_age" name="pet_age" min="0"><br><br>

        <label for="contact_details">Дополнительные контактные данные:</label>
        <textarea id="contact_details" name="contact_details"></textarea><br><br>

        <button type="submit">Отправить</button>
    </form>
</body>
<script>
    let tg = window.Telegram.WebApp; // получаем объект WebApp Telegram

    // Инициализируем WebApp
    tg.ready();

    // Пример использования API
    // Устанавливаем цвет темы приложения
    tg.MainButton.setParams({
        text: "Отправить",
        color: "#2cab37" // зелёный цвет
    });

    // Отображаем основную кнопку
    tg.MainButton.show();

    // Обработчик события при нажатии на кнопку
    tg.MainButton.onClick(function () {
        // Сбор данных с формы
        let formData = {
            telegram_id: document.getElementById('telegram_id').value,
            full_name: document.getElementById('full_name').value,
            phone_number: document.getElementById('phone_number').value,
            pet_name: document.getElementById('pet_name').value,
            pet_breed: document.getElementById('pet_breed').value || null,
            pet_age: document.getElementById('pet_age').value || null,
            contact_details: document.getElementById('contact_details').value || null
        };

        // Отправляем данные в родительское приложение Telegram
        tg.sendData(JSON.stringify(formData));

        // Закрыть WebApp после отправки
        tg.close();
    });



</script>

</html>
